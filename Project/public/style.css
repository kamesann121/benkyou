:root{
  --bg:#0d2333;
  --panel:#123544;
  --accent:#4cc9f0;
  --accent-2:#7c3aed;
  --muted:#b3cbd8;
  --input-bg: rgba(255,255,255,0.03);
  --input-color: #eaf6ff;
  --radius:12px;
}

/* reset */
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:#eaf6ff;background:linear-gradient(180deg,#0b2b3a 0%, var(--bg) 100%);}
.wrap{max-width:1200px;margin:20px auto;padding:12px;display:grid;grid-template-columns:260px 1fr 360px;gap:14px;align-items:start}

/* left shop */
.left-panel{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));border-radius:var(--radius);padding:12px;position:relative}
.shop-toggle{display:flex;align-items:center;gap:10px;width:100%;padding:10px;border-radius:999px;border:none;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#021124;font-weight:800;cursor:pointer;font-size:14px}
.shop-body{margin-top:12px;max-height:560px;overflow:auto;transition:all 260ms ease}
.shop-body[aria-hidden="true"]{display:none}

/* internals */
.balance{margin:8px 0;padding:8px;border-radius:8px;background:rgba(0,0,0,0.2);font-weight:800;color:var(--accent);text-align:center}
.shop-item{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:10px;background:linear-gradient(180deg, rgba(0,0,0,0.12), rgba(255,255,255,0.01));margin-bottom:8px;border:1px solid rgba(255,255,255,0.03)}
.shop-item .price{font-size:13px;color:var(--muted)}
.shop-actions{display:flex;gap:8px}
.shop-actions button{padding:8px 10px;border-radius:8px;border:none;cursor:pointer;font-weight:700}
.buy-btn{background:linear-gradient(90deg,var(--accent-2),var(--accent));color:#021124}
.gift-btn{background:linear-gradient(90deg,#ffd166,#ff9a66);color:#021124}

/* center */
.center-panel{background:linear-gradient(180deg, rgba(0,0,0,0.03), rgba(255,255,255,0.01));border-radius:var(--radius);padding:16px;display:flex;flex-direction:column;align-items:center}
.game-header{width:100%;display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.gold-large{background:linear-gradient(90deg,#ffd166,#ff6b6b);padding:6px 12px;border-radius:10px;color:#021124;font-weight:900}

/* mineral area: fix image size */
.mineral-area{position:relative;width:340px;height:340px;display:flex;align-items:center;justify-content:center;border-radius:12px;background:linear-gradient(180deg, rgba(124,58,237,0.04), rgba(76,201,240,0.02));overflow:hidden}
#mineralImg{width:40%;max-width:160px;transition:transform 120ms ease}
.tap-btn{position:absolute;bottom:18px;padding:16px 34px;border-radius:999px;border:none;background:linear-gradient(90deg,#ffd166,#ff6b6b);color:#021124;font-weight:900;font-size:17px;cursor:pointer}

/* right chat */
.right-panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:var(--radius);padding:12px;display:flex;flex-direction:column;gap:10px}
.chat-header{display:flex;gap:8px;align-items:center}
.chat-header input, .chat-header select, .chat-header input[type="file"]{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:var(--input-bg);color:var(--input-color)}
.chat-header .round-btn{padding:8px 12px;border-radius:999px;border:none;background:linear-gradient(90deg,#7c3aed,#4cc9f0);color:#021124;font-weight:900;cursor:pointer;height:40px;width:40px;display:inline-flex;align-items:center;justify-content:center}

/* tabs */
.tab-controls{display:flex;gap:8px;margin-top:8px}
.tab-btn{padding:8px 10px;border-radius:8px;border:none;background:transparent;color:var(--input-color);cursor:pointer}
.tab-btn.active{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#021124}

/* messages improved readability */
.messages{height:300px;overflow:auto;padding:10px;border-radius:8px;background:linear-gradient(180deg, rgba(5,20,30,0.18), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.02);display:flex;flex-direction:column;gap:8px}
.msg-row{display:flex;gap:10px;align-items:flex-start}
.msg-icon{width:40px;height:40px;border-radius:10px;object-fit:cover;flex:0 0 40px;border:1px solid rgba(255,255,255,0.04)}
.msg-content{flex:1;padding:10px;border-radius:10px;background:rgba(255,255,255,0.02);backdrop-filter: blur(6px)}
.msg-content .meta{font-size:12px;color:var(--muted);margin-bottom:6px}
.msg-content .body{font-size:15px;color:#e7fbff}

/* inventory */
.inventory-header{display:flex;justify-content:space-between;align-items:center;padding:8px;background:rgba(0,0,0,0.06);border-radius:8px}
.inventory-list{margin-top:10px;padding:8px;border-radius:8px;background:rgba(0,0,0,0.05);min-height:120px}

/* modal */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(2,6,12,0.5);z-index:9999}
.modal[aria-hidden="false"]{display:flex}
.modal-inner{background:linear-gradient(180deg,#06242f,#0c2b3a);padding:16px;border-radius:12px;width:820px;color:#eaf6ff;box-shadow:0 18px 60px rgba(0,0,0,0.6)}
.inv-columns{display:flex;gap:16px}
.inv-left{width:48%;max-height:420px;overflow:auto}
.inv-right{width:52%}
.inv-items{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:8px}
.inv-items li{padding:8px;border-radius:8px;background:rgba(255,255,255,0.03);display:flex;justify-content:space-between;align-items:center;cursor:pointer}
.inv-items li.selected{outline:2px solid rgba(124,58,237,0.45)}
.inv-detail{min-height:120px;padding:10px;border-radius:8px;background:rgba(0,0,0,0.12)}
.inv-actions{display:flex;gap:8px;margin-top:8px}
.fuse-slots{display:flex;gap:8px;margin-top:8px}
.fuse-slot{flex:1;padding:10px;border-radius:8px;background:rgba(255,255,255,0.03);text-align:center}
.fuse-actions{display:flex;gap:8px;margin-top:8px}
.fuse-preview{background:rgba(0,0,0,0.06);padding:8px;border-radius:8px}

/* toast */
#toastContainer{position:fixed;left:50%;transform:translateX(-50%);bottom:18px;z-index:9998;pointer-events:none;display:flex;flex-direction:column;gap:8px;align-items:center}
.toast{background:rgba(8,20,30,0.9);color:#fff;padding:10px 14px;border-radius:10px;box-shadow:0 8px 26px rgba(0,0,0,0.6);pointer-events:auto;opacity:0;transform:translateY(8px);transition:opacity 220ms ease, transform 220ms ease}
.toast.show{opacity:1;transform:translateY(0)}

@media(max-width:980px){
  .wrap{grid-template-columns:1fr;gap:12px;padding:12px}
  .modal-inner{width:95%}
}
